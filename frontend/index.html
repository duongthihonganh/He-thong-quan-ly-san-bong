<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang chủ - Hệ thống Quản lý Sân Bóng</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/details.css">
  <link rel="stylesheet" href="assets/css/activities.css">
</head>
<body>
  <div class="dashboard-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <i class="fas fa-futbol"></i>
          <span>SOCCER FIELD</span>
        </div>
      </div>
      
      <ul class="sidebar-menu">
        <li class="menu-item">
          <a href="index.html" class="menu-link active">
            <span class="menu-icon"><i class="fas fa-tachometer-alt"></i></span>
            <span>Tổng quan</span>
          </a>
        </li>
        <li class="menu-item">
          <a href="bookings.html" class="menu-link">
            <span class="menu-icon"><i class="fas fa-calendar-alt"></i></span>
            <span>Đặt sân</span>
          </a>
        </li>
        <li class="menu-item">
          <a href="fields.html" class="menu-link">
            <span class="menu-icon"><i class="fas fa-futbol"></i></span>
            <span>Sân bóng</span>
          </a>
        </li>
        <li class="menu-item">
          <a href="customers.html" class="menu-link">
            <span class="menu-icon"><i class="fas fa-users"></i></span>
            <span>Khách hàng</span>
          </a>
        </li>
        <li class="menu-item">
          <a href="services.html" class="menu-link">
            <span class="menu-icon"><i class="fas fa-concierge-bell"></i></span>
            <span>Dịch vụ</span>
          </a>
        </li>
        <li class="menu-item">
          <a href="reports.html" class="menu-link">
            <span class="menu-icon"><i class="fas fa-chart-bar"></i></span>
            <span>Báo cáo</span>
          </a>
        </li>
      </ul>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
      <!-- Top Bar -->
      <div class="top-bar">
        <div class="page-title">
          Tổng quan
        </div>
        
        <div class="user-dropdown">
          <div class="dropdown-toggle">
            <div class="user-info">
              <div class="user-name">Người dùng</div>
              <div class="user-role">Quản lý</div>
            </div>
            <i class="fas fa-chevron-down"></i>
          </div>
          
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item">
              <i class="fas fa-user-circle"></i> Hồ sơ
            </a>
            <a href="#" class="dropdown-item">
              <i class="fas fa-cog"></i> Cài đặt
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" id="logoutBtn" class="dropdown-item">
              <i class="fas fa-sign-out-alt"></i> Đăng xuất
            </a>
          </div>
        </div>
      </div>
      
      <!-- Dashboard Content -->
      <div id="dashboardSummary">
        <!-- Summary Cards -->
        <div class="dashboard-cards">
          <div class="card">
            <div class="card-body">
              <div class="dashboard-card">
                <div class="card-icon">
                  <i class="fas fa-calendar-check"></i>
                </div>
                <div class="card-info">
                  <h3 id="todayBookings">0</h3>
                  <p>Đặt sân hôm nay</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-body">
              <div class="dashboard-card">
                <div class="card-icon">
                  <i class="fas fa-money-bill-wave"></i>
                </div>
                <div class="card-info">
                  <h3 id="todayRevenue">0 ₫</h3>
                  <p>Doanh thu hôm nay</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-body">
              <div class="dashboard-card">
                <div class="card-icon">
                  <i class="fas fa-users"></i>
                </div>
                <div class="card-info">
                  <h3 id="newCustomers">0</h3>
                  <p>Khách hàng mới</p>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-body">
              <div class="dashboard-card">
                <div class="card-icon">
                  <i class="fas fa-tools"></i>
                </div>
                <div class="card-info">
                  <h3 id="fieldsInMaintenance">0</h3>
                  <p>Sân đang bảo trì</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Field Status Overview -->
        <div class="card" style="margin-bottom: 1.5rem;">
          <div class="card-header">
            Tổng quan tình trạng sân
          </div>
          <div class="card-body">
            <div id="fieldStatusOverview" class="field-status-container">
              <p>Đang tải thông tin sân...</p>
            </div>
          </div>
        </div>
        
        <!-- Quick Access -->
        <div class="card" style="margin-bottom: 1.5rem;">
          <div class="card-header">
            Truy cập nhanh
          </div>
          <div class="card-body">
            <div style="display: flex; flex-wrap: wrap; gap: 1rem;">
              <a href="bookings.html" class="btn">
                <i class="fas fa-plus-circle"></i> Đặt sân mới
              </a>
              <a href="customers.html" class="btn">
                <i class="fas fa-user-plus"></i> Thêm khách hàng
              </a>
              <a href="reports.html" class="btn">
                <i class="fas fa-file-export"></i> Xuất báo cáo
              </a>
            </div>
          </div>
        </div>
        
        <!-- Recent Activities -->
        <div class="card">
          <div class="card-header">
            Hoạt động gần đây
          </div>
          <div class="card-body">
            <div id="recentActivities" class="activities-list">
              <p>Đang tải hoạt động...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Field Status Table -->
    <div class="section">
      <div class="card">
        <div class="card-header">
          Trạng thái tất cả các sân
        </div>
        <div class="card-body">
          <div id="allFieldsStatusTable">
            <table class="table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Tên sân</th>
                  <th>Loại</th>
                  <th>Trạng thái</th>
                  <th>Giá tiền</th>
                  <th>Thời gian trống tiếp theo</th>
                </tr>
              </thead>
              <tbody id="allFieldsStatusBody">
                <tr>
                  <td colspan="6" class="text-center">Đang tải dữ liệu sân...</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Revenue Statistics -->
    <div class="section">
      <div class="card">
        <div class="card-header">
          Thống kê doanh thu
        </div>
        <div class="card-body">
          <div class="tabs">
            <div class="tab-header">
              <div class="tab active" data-tab="daily">Theo ngày</div>
              <div class="tab" data-tab="monthly">Theo tháng</div>
              <div class="tab" data-tab="quarterly">Theo quý</div>
              <div class="tab" data-tab="comparison">So sánh</div>
            </div>
            <div class="tab-content">
              <div id="daily-tab" class="tab-pane active">
                <h3>Doanh thu theo ngày</h3>
                <div id="daily-chart" class="chart-container">
                  <canvas id="dailyRevenueChart"></canvas>
                </div>
              </div>
              <div id="monthly-tab" class="tab-pane">
                <h3>Doanh thu theo tháng</h3>
                <div id="monthly-chart" class="chart-container">
                  <canvas id="monthlyRevenueChart"></canvas>
                </div>
              </div>
              <div id="quarterly-tab" class="tab-pane">
                <h3>Doanh thu theo quý</h3>
                <div id="quarterly-chart" class="chart-container">
                  <canvas id="quarterlyRevenueChart"></canvas>
                </div>
              </div>
              <div id="comparison-tab" class="tab-pane">
                <h3>So sánh doanh thu và chi phí</h3>
                <div id="comparison-chart" class="chart-container">
                  <canvas id="comparisonChart"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <script src="assets/js/data.js"></script>
  <script src="assets/js/main.js"></script>
  <script src="assets/js/dashboard.js"></script>
  
  <script>
    // Cập nhật trạng thái của sân bóng mỗi 30 giây
    setInterval(function() {
      if (typeof fetchFieldStatusOverview === 'function') {
        fetchFieldStatusOverview();
        console.log('Cập nhật trạng thái sân bóng tự động');
      }
    }, 30000);
    
    // Tab switching functionality
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', function() {
        // Remove active class from all tabs
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
        
        // Add active class to clicked tab
        this.classList.add('active');
        document.getElementById(this.dataset.tab + '-tab').classList.add('active');
      });
    });
  </script>
</body>
</html>
